<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MailTrace Beta Upload</title>
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; padding: 24px; max-width: 900px; margin: 0 auto; }
      .card { border: 1px solid #e5e7eb; border-radius: 16px; padding: 24px; box-shadow: 0 2px 10px rgba(0,0,0,0.04); }
      .row { display: flex; gap: 16px; flex-wrap: wrap; }
      label { font-weight: 600; }
      input[type="file"] { display:block; margin-top: 8px; }
      button { padding: 10px 16px; border-radius: 10px; border: 1px solid #e5e7eb; cursor: pointer; }
      .note { color: #6b7280; font-size: 14px; }
      .brand { font-weight: 800; letter-spacing: 0.5px; }
      .mt { color: #10b981; } /* green accent */
      .flash { color: #b91c1c; margin-bottom: 8px; }
    </style>
  </head>
  <body>
    <h1 class="brand"><span class="mt">Mail</span>Trace — Beta Uploader</h1>
    <p class="note">Upload two CSV files: your <strong>Mail History</strong> and your <strong>CRM list</strong>. We’ll run a quick match and render a preview dashboard.</p>

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        {% for m in messages %}
          <div class="flash">{{ m }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <form class="card" action="/upload" method="POST" enctype="multipart/form-data">
      <div class="row">
        <div style="flex:1; min-width: 260px;">
          <label>Mail History CSV</label>
          <input type="file" name="mail_csv" accept=".csv" required />
          <p class="note">Any header format is fine for beta.</p>
        </div>
        <div style="flex:1; min-width: 260px;">
          <label>CRM CSV</label>
          <input type="file" name="crm_csv" accept=".csv" required />
          <p class="note">We auto-detect addresses and normalize.</p>
        </div>
      </div>
      <div style="margin-top:16px;">
        <button type="submit">Run Match</button>
      </div>
    </form>
  </body>
</html>
